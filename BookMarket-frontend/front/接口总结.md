# 首页后端接口总结

## ✅ 已完成的工作

### 1. API文件结构
```
src/api/
├── index.ts          ✅ API导出索引
├── request.ts        ✅ Axios请求封装（拦截器、错误处理）
├── book.ts           ✅ 书籍相关接口
├── auth.ts           ✅ 认证相关接口
├── cart.ts           ✅ 购物车相关接口
├── favorite.ts       ✅ 收藏相关接口
├── mock.ts           ✅ Mock数据
└── mockApi.ts        ✅ Mock API服务
```

### 2. 环境变量配置
```
.env.development      ✅ 开发环境配置
.env.production       ✅ 生产环境配置
```

### 3. 文档
```
API.md                ✅ API接口文档
TESTING.md            ✅ 测试指南
```

---

## 🔌 首页所需接口

### 必需接口（2个）

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 获取热门分类 | GET | `/api/books/categories` | 返回6个分类 |
| 获取热门书籍 | GET | `/api/books/hot` | 返回4本热门书籍 |

### 可选接口（1个）

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 获取书籍列表 | GET | `/api/books` | 支持筛选和排序 |

---

## 📊 接口数据格式

### 1. 获取热门分类
**请求**: `GET /api/books/categories`

**响应**:
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": "literature",
      "name": "文学小说",
      "icon": "📖",
      "count": 2345
    }
  ]
}
```

---

### 2. 获取热门书籍
**请求**: `GET /api/books/hot?limit=4`

**响应**:
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "title": "JavaScript高级程序设计",
      "author": "Nicholas C. Zakas",
      "cover": "https://example.com/book1.jpg",
      "condition": "90",
      "price": 45.00,
      "originalPrice": 99.00,
      "sellerName": "书香阁",
      "sellerLevel": "金牌卖家",
      "sellerRating": 4.9,
      "isVerified": true
    }
  ]
}
```

---

## 🧪 测试方式

### 方式一：使用Mock数据（推荐）

无需后端，直接使用Mock数据测试：

```typescript
import { mockApi } from '@/api/mockApi'

// 获取热门分类
const categories = await mockApi.getCategories()

// 获取热门书籍
const hotBooks = await mockApi.getHotBooks(4)
```

**优点**:
- ✅ 无需后端服务
- ✅ 开发速度快
- ✅ 数据可控

---

### 方式二：连接真实后端

配置环境变量后连接真实后端：

1. 编辑 `.env.development`:
   ```bash
   VITE_API_BASE_URL=http://your-backend:3000/api
   ```

2. 使用API:
   ```typescript
   import { getCategories, getHotBooks } from '@/api'

   const categories = await getCategories()
   const hotBooks = await getHotBooks(4)
   ```

**优点**:
- ✅ 真实数据
- ✅ 完整功能测试
- ✅ 发现集成问题

---

## 📋 测试清单

### 功能测试
- [ ] 导航栏固定顶部
- [ ] Hero区域渐变背景
- [ ] 6个热门分类显示
- [ ] 4本热门书籍显示
- [ ] 4个平台特色显示
- [ ] 页脚信息显示

### 交互测试
- [ ] 分类卡片悬停放大
- [ ] 书籍卡片悬停上浮
- [ ] 按钮悬停效果
- [ ] 链接点击跳转

### 接口测试
- [ ] `/api/books/categories` 返回正确数据
- [ ] `/api/books/hot` 返回正确数据
- [ ] 错误处理正常

### 响应式测试
- [ ] 移动端（< 640px）
- [ ] 平板（640px - 1024px）
- [ ] 桌面端（> 1024px）

---

## 🎯 快速测试步骤

### 1. 启动开发服务器
```bash
cd d:\Downloads\BookMarket\BookMarket-frontend\front
npm run dev
```

### 2. 访问首页
打开浏览器访问: `http://localhost:5173/`

### 3. 验证功能
- 检查页面是否正常显示
- 检查控制台是否有错误
- 检查网络请求是否正常

### 4. 测试交互
- 点击分类卡片
- 点击书籍卡片
- 悬停查看动画效果

---

## 📖 文档说明

### API.md
完整的API接口文档，包含：
- 接口文件结构
- 接口使用示例
- 数据类型定义
- 环境变量配置
- 常见问题解决

### TESTING.md
详细的测试指南，包含：
- 测试概述
- 接口说明
- 测试步骤
- 功能测试清单
- 常见问题
- 性能测试

---

## 🔧 后端开发参考

如果需要开发后端接口，请参考：

### Node.js + Express 示例

```javascript
// 获取热门分类
app.get('/api/books/categories', (req, res) => {
  const categories = [
    { id: 'literature', name: '文学小说', icon: '📖', count: 2345 },
    { id: 'tech', name: '计算机技术', icon: '💻', count: 1876 }
  ]
  res.json({ code: 200, message: 'success', data: categories })
})

// 获取热门书籍
app.get('/api/books/hot', (req, res) => {
  const limit = parseInt(req.query.limit) || 4
  const books = getHotBooks(limit)
  res.json({ code: 200, message: 'success', data: books })
})
```

---

## 🚀 下一步

1. **连接真实后端**
   - 配置环境变量
   - 测试接口连通性
   - 验证数据格式

2. **完善错误处理**
   - 添加加载状态
   - 优化错误提示
   - 添加重试机制

3. **性能优化**
   - 图片懒加载
   - 代码分割
   - 缓存策略

4. **开发其他页面**
   - 书籍列表页
   - 书籍详情页
   - 购物车页
   - 用户中心
   - 卖家中心

---

## 📞 技术支持

如有问题，请查看：
- [API.md](./API.md) - API接口文档
- [TESTING.md](./TESTING.md) - 测试指南
- [项目指导文件](../项目指导文件/) - 完整项目文档
